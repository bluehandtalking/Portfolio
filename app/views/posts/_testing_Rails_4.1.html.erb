<div >
<h1 class="blog-title right" >
Rails 4.1 Testing with</P>
<h1 class="blog-title right">
Test::Unit, MiniTest, and Rspec</P>
</div>
<hr class=".rule"/>
<P>
<BR>
</P>
<H1  id="top" >
What is this Testing All About?</H1>
<P >Testing in Ruby on
Rails was built in from the very beginning.</P>
<P>There are 3
environments you can run your application in</P>
<UL>
	<LI>Development</LI>
	<LI>Production</LI> 
	<LI>Test</LI> 
</UL>
<P >
</P>

<P>All 3 are configured
in <I>config/database.yml  </I>and in the relevant</P>
<P ><I>config/environments/development.rb,
config/environments/production.rb,</I></P>
<P>or
<I>config/environments/test.rb.</I></P>
<P>
</P>
<P><FONT COLOR="#38761d"><B>Tests
    ensure that your code adheres to the desired <br/>functionality, even after major refactoring.</B></FONT></P>
<H1> Testing Frameworks</H1>
<P>At this time there are 3 main frameworks for testing in Rails:<br /></P>
<OL>
	<LI>Test::Unit.
	This has been the default Rails test framework in Rails
	versions up to v.4.0.
	<LI>MiniTest Test
	Suite. Focus on a minimal, fast, clean framework. This has replaced
	Test::Unit as of v.4.0. 
</OL>
<span class="nested-list">
<UL>
  <LI>minitest/unit. Small and incredibly fast with rich set of assertions.</LI>
	<LI>minitest/spec. Functionally complete spec engine. Hooks onto minitest/unit and
  seamlessly bridges test assertions to spec expectations.</LI>
	<LI>minitest/bench. Provides a way to assert the performance of your algorithms.</LI>
	<LI>minitest/mock. Tiny mock/stub object framework.</LI>
	<LI>minitest/pride. Color test output.</LI>
</UL>
</span>
<OL START=3>
	<LI>Rspec. Focus on
	Behavior Driven Development, and tests which describe domain
	specific functions.</LI>
</OL>
<span class="nested-list">
<UL>
	<LI>Textual description of examples.</LI>
	<LI>Extensible expectation language.</LI>
	<LI>Built-in mocking/stubbing line program.</LI>
	<LI>Flexible and customizable reporting.</LI>
</UL>
</span>
<H1>Types of Tests</H1>
<P>What do we test in a Rails app? Ideally, everything: Models, Controllers, Views, 
Helpers, Routing. However, the following list may be more typical,
the nomenclature starts with Test::Unit or MiniTest followed by
Rspec:</P>
<OL>
	<LI>Unit test models,  model specs.</LI>
	<LI>Unit test helpers,  helper specs.</LI>
	<LI>Functional tests of controllers/mailers,  controller/mailer specs.</LI>
  <LI>Integration tests (Rails) Test the entire stack.</LI> 
	<LI>Acceptance testing (this can be feature, integration, or other testing).</LI>
	<LI>Performance testing.</LI>
	<LI>Rspec specific.</LI>
</OL>
<span class="nested-list">
<UL>
	<LI>Request Spec. 
	Built on top of Rails Integration tests. Access to API methods that
	mirror what you find in HTTP: “get”, “put”, “post”,
	“patch”, etc, and gives you a “response object to make your
	assertions against, test entire stack.</LI>
	<LI>Feature Spec. Built on top of Capybara, whose goal is to ‘simulate user
	behavior’. Attempts to use language in a natural fashion.</LI>
</UL>
</span>
<pre>
<code "ruby">
    visit '/sessions/new'
    fill_in 'Login', with: 'user@example.com'
    fill_in 'Password', with: 'secret'
    click_link 'Sign in'
</code>
</pre>
<p></p>
<H3>Examples for Test::Unit / Minitest:</H3>
<p></p>
<pre>
<code class="ruby">
#  test/test_helper.rb

ENV["RAILS_ENV"] ||= "test"
require File.expand_path('../../config/environment', __FILE__)
require 'rails/test_help'

class ActiveSupport::TestCase
  ActiveRecord::Migration.check_pending!
  # Setup fixtures in test/fixtures/*.yml for all tests
  # in alphabetical order.
  # Note: You'll currently still have to declare
  # Fixtures explicitly in integration tests
  fixtures :all
  # Add more helper methods to be used by all tests here…
end
</code>
</pre>
<p></p>

<p>The above helper
file will need to be customized according to your needs. The example is the
generated file from Rails. You will ‘require’ this file in your
unit test. Here is an example of the stub created by Rails for a User model:</P>

<pre>
<code class="ruby">
#test/models/user_test.rb

require 'test_helper'
class UserTest < ActiveSupport::TestCase
  # test "the truth" do
    # assert true, "Should be Truthy"
  # end
end
</code>
</pre>
<p></p>
			<P>Note the the following:</P>
			<UL>
				<LI>In the above example, Rails
				generates a test case that inherits from ActiveSupport::TestCase.
				This gives us access to HashWithIndifferentAccess along with
				other methods and some syntactic sugar. Your actual test case may
				very well need to inherit from some other class depending on what
        you are doing.</LI>
        <LI>The “Should be Truthy” string is optional, but it gives you important information about what exactly failed in a test.</LI>
			</UL>
			<P><BR>
			</P>
			<P>The simplest form of a unit test,
			without a test_helper.rb file would look like this:</P>

      <pre>
      <code class="ruby">
# mytest_test.rb

require "test/case"  #Included in ruby

class Mytest < Test::Unit::TestCase
  def test_what-we-are-testing
    #assert 
  end
end
      </code>
      </pre>
      <p></p>
			<P>Basically you will want to test
			every method in your model with assertions.</P>
			</P>
			<P>      <A HREF="http://guides.rubyonrails.org/testing.html#available-assertions"><FONT COLOR="#880000"><U>Test::Unit
			Assertions</U></FONT></A></P>
			<P>                    
			</P>
			<P>      <A HREF="http://docs.seattlerb.org/minitest/Minitest/Assertions.html"><FONT COLOR="#880000"><U>MiniTest
			assertions</U></FONT></A></P>
			<P>
			</P>
<H3>
Examples for Rspec:</H3>
<P></P>
<P>rspec-rails 3
generates rails_helper.rb and spec_helper.rb. 
</P>
<P>
</P>
<P>rails_helper.rb is
for specs which depend on Rails, spec_helper.rb is for specs which
don't depend on Rails (such as specs for classes in the lib
directory).</P>
<P>
</P>
<P> rails_helper.rb requires spec_helper.rb. 
</P>

<pre>
<code>
# spec/rails_helper.rb

ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'

Dir[Rails.root.join("spec/support/**/*.rb")].each { |f| require f }
ActiveRecord::Migration.check_pending! if defined?(ActiveRecord::Migration)

RSpec.configure do |config|
  # config.mock_with :mocha
  # config.mock_with :flexmock
  # config.mock_with :rr

  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  config.fixture_path = "#{::Rails.root}/spec/fixtures"

  # If true, the base class of anonymous controllers will be inferred
  # automatically. This will be the default behavior in future versions of
  # rspec-rails.
  config.infer_base_class_for_anonymous_controllers = false

  # Run specs in random order to surface order dependencies. If you find an
  # order dependency and want to debug it, you can fix the order by providing
  # the seed, which is printed after each run.
  #     --seed 1234
  config.order = "random"

  # RSpec Rails can automatically mix in different behaviours to your tests
  # based on their file location, for example enabling you to call `get` and
  # `post` in specs under `spec/controllers`.
  # You can disable this behaviour by removing the line below, and instead
  # explictly tag your specs with their type, e.g.:
  #
  #     describe UsersController, :type => :controller do
  #       # ...
  #     end
  #
  # The different available types are documented in the features, such as in
  # https://relishapp.com/rspec/rspec-rails/v/3-0/docs
  config.infer_spec_type_from_file_location!
 end

</code>
</pre>

<P></P>
<P>Given a model:</P>
<pre>
<code class="ruby">
class Post < ActiveRecord::Base
  validates :title, presence: true
end
</code>
</pre>
<p></p>
<p>
A Post model spec could resemble the following:</P>
<p></p>
<pre>
<code class="ruby">
require 'spec_helper'
describe Post do
  describe "title validation" do
    context "title is present" do
      before(:each) do
        @post = Post.new(title: "My first post")
      end
      it "does not add an error on the 'title' attribute" do
        @post.should have(0).error_on(:title)
      end
    end
    context "title is not present" do
      before(:each) do
        @post = Post.new
      end
      it "adds an error on the 'title' attribute" do
        @post.should have(1).error_on(:title)
      end
    end
 end 

</code>
</pre>
<p></p>
<p>...and the same test
with shoulda-matchers gem:</P>
<p></p>
<pre>
<code class="ruby">
require 'spec_helper'

describe Post do
  it { should validate_presence_of(:title) }
end
</code>
</pre>
<p></p>
<p>
  Semaphore provides good instructions for setting up a Rails 4 BDD
stack, including rspec-rails, shoulda-matchers, factory_girl,
cucumber-rails (capybara is dependency), and selenium-webdriver.</P>
<p>
<A HREF="https://semaphoreapp.com/blog/2013/08/14/setting-up-bdd-stack-on-a-new-rails-4-application.html"><FONT COLOR="#880000"><u>Semaphore Rails 4 BDD Stack</u></A></P>
<H1 CLASS="western" STYLE="line-height: 150%"><A NAME="h.xhei9vfkyzom"></A>
Setting Up your Data</H1>
<p><BR>
</P>
<p>Just about every Rails application depends on heavy interaction with the database and as a result it is necessary to know how to setup the database for the test environment and populate it with data. It is useful to know the standard ways to setup the database for development and production so as to know how these may 
be different from setup for the test environment.</P>
<p><BR>
</P>
<H3 >SEED DATA</H3>
<p>
</P>
<p>The seed file should only contain the minimal amount of data for your application
to function properly. In your application Rails will create a file <I>db/seeds.rb</I>. Rails also creates a rake task</P>
<p><span class="code-blue code-shift">rake db:seed</span></P>
<p>
</P>
<p>which will parse the
seed file and populate the database. You customize the seeds file and add any data that is critical to the functionality of your data.</P>
<p>
</P>
<p>As a side note, in
your views you may wish to internationalize your data for forms or on
a page by using <B>I18N
</B>internationalization. This is mentioned here because you could also create templates for form data and store them in the database using seed data. This is all
dependent on your design criteria.</P>
<p>
</P>
<p>Here are a couple of
resources on these topics:</P>
<p>
</P>
<UL>
  <LI><A HREF="http://www.xyzpub.com/en/ruby-on-rails/3.2/seed_rb.html"><FONT COLOR="#880000"><U>Seed	Data</U></FONT></A></li>
	<LI><A HREF="http://railscasts.com/episodes/138-i18n-revised"><FONT COLOR="#880000"><U>Ryan Bates Railscast on Internationalization</U></FONT></A></li>
</UL>
<p></P>
<p>Before seeding your
test database you must prep your app:</P>
<p></P>
<p><span class="code-blue code-shift">bundle exec rake db:drop RAILS_ENV=test</span> 
</P>
<p><span class="code-blue code-shift">bundle exec rake db:create RAILS_ENV=test</span> 
</P>
<p><span class="code-blue code-shift">bundle exec rake db:schema:load RAILS_ENV=test</span></P>
<p>
</P>
<p>Or the following can
be used for preparing your test db:</P>
<p>
</P>
<p>	<span class="code-blue code-shift">bundle exec rake db:test:prepare</span></P>
<P STYLE="margin-bottom: 0.11in; line-height: 150%">...which checks
for migrations and loads your schema.</P>
<p>The above is
deprecated in Rails v.4.1.</P>
<p>
</P>
<p>Following are example methods for loading seed data in your test environment.</P>
<p>
</P>
<p>Create a file
<FONT FACE="Georgia, Times New Roman, serif"><I><B>lib/tasks/test_seed.rake</B></I></FONT>
with the following in it:</P>
<p></p>
<pre>
<code class="ruby">
# tasks/test_seed.rake
namespace:db do
  namespace :test do
    task :prepare => :environment do
      Rake::Task[“db:seed”].invoke
    end
  end
end
</code>
</pre>
<p></p>
<p> In Rails 4.x adding the following to test/test_helper.rb or spec/spec_helper.rb:         
</P>
<pre>
<code-blue class="code-shift">
   Rails.application.load_seed
</code-blue>
</pre>
<p></p>
<p>There are also a couple of Gems that may increase your productivity when you are 
managing your seed data:</P>
<p>
</P>
<UL>
  <LI><A HREF="http://viget.com/extend/smarter-rails-seeding-with-sprig">Sprig</A> <A HREF="https://github.com/vigetlabs/sprig">github</A></li>
	<LI><A HREF="http://engineering.harrys.com/2014/06/09/seed-migrations.html">Seed	Migrations</A> <A HREF="https://github.com/harrystech/seed_migration">github</A></li>
  <LI><A HREF="http://richonrails.com/articles/seeding-your-database-with-seed-fu">Seed Fu</A> <A HREF="https://github.com/mbleigh/seed-fu">github</A></li>
	<LI><A HREF="https://github.com/james2m/seedbank">Seed Bank</A> 
	</li>
</UL>
<H3 >FIXTURES OR FACTORIES?</H3>
<P>
</P>
<p>...And that is the
question!  A question in many minds of the Ruby on Rails community:</P>
<p>
</P>
<p>To
Fixture or to Factory?</P>
<p>
</P>
<H1>FIXTURES</H1>
<p>
</P>
<p>Years of
manufacturing store/display/presentation fixtures in a cabinet shop 
broadened my understanding of the variety of forms physical fixtures could take.</p> 
<p>In Rails this is
possible too. For what is a <FONT COLOR="#b45f06"><I><B>.yml </B></I></FONT>(YAML
 Ain’t  Markup Language) file if not a place to use some
Ruby? This leverages the generation of your test data by enabling custom fixture
generation and simplifies the creation process.</p>
<p>With fixtures you end up writing several definitions for the same object. They 
encourage repetition and the use of unique examples. This is one of the strengths of using fixtures. By creative use of fixtures the story of your app is
revealed in a memorable fashion. Fixtures can be difficult in the beginning of a project, but become easier to use as the project progresses. It is suggested to write 3 fixtures for each model, which will allow you some wiggle room when you need it. Using descriptive names which help you identify the flow of the story is also very useful.</P>
<p>
</P>
<p>Pros of Fixtures:</P>
<p>
<UL>
	<li>They encourage you to be as complex as possible as early as possible.</li>
	<li>Provide opportunity to regard your application in the real world, vs just
	being just a bunch of classes.  The story you build in fixtures reflects the story of your app.</li>
	<li>Amazingly fast. Fixtures are directly inserted into the database when Rails boots up the test environment. Object creation is bypassed entirely, as are callbacks and validation</li>
	<li>Simplified Integration Testing. Since fixtures insert data into the database at the beginning of running a test, that data is available to all threads. This removes the problem encountered when using a javascript enabled driver like selenium, which runs browser actionsin a separate thread. Thus data set up in another thread is not visible.</li>
</UL>
</p>
<p>      <A HREF="http://api.rubyonrails.org/classes/ActiveRecord/FixtureSet.html#method-c-context_class">Rails Fixture Reference</A></P>
<p><BR>
</P>
<H1>FACTORIES</H1>
<p>
</P>
<p>From the Rolling
Stones, to <span class="code-em">GoF</span>, and</P>
<p>
</P>
<p>     thoughtbot</P>
<div>
<p> <SPAN ><IMG SRC="assets/thoughtbot_robot.png"  WIDTH=95 HEIGHT=95 BORDER=0></SPAN>
</P>
</div>
<p>
</P>
<p>there are factories and there is <A HREF="https://github.com/thoughtbot/factory_girl">Factory Girl</A></P>
<p>
</P>
<p>There is also<FONT COLOR="#800000"><B>
</B></FONT><A HREF="https://github.com/paulelliott/fabrication"><FONT COLOR="#880000"><U><B>Fabrication</B></U></FONT></A></P>
<p>
</P>
<H3 CLASS="western" STYLE="line-height: 150%"><A NAME="h.tn9g6y7w7ub5"></A>
ThoughtBot on Factory Girl:</H3>
<P STYLE="margin-bottom: 0.21in; line-height: 150%"><SPAN STYLE="background: #ffffff">“</SPAN><FONT FACE="Georgia, serif"><FONT SIZE=4><SPAN STYLE="background: #ffffff">W</SPAN></FONT></FONT><FONT FACE="Georgia, serif"><SPAN STYLE="background: #ffffff">e
prefer factories (with FactoryGirl) over Rails fixtures, because
fixtures are a form of Mystery Guest. Fixtures make it hard to see
cause and effect, because part of the logic is defined in a file far
away from the context in which you are using it. Because fixtures are
implemented so far away from your tests, they tend to be hard to
control.</SPAN></FONT></P>
<p><FONT FACE="Georgia, serif"><SPAN STYLE="background: #ffffff">Factories,
on the other hand, put the logic right in the test. They make it easy
to see what is happening at a glance and are more flexible to
different scenarios you may want to set up.While factories are slower
than fixtures, we think the </SPAN></FONT>
</P>
<p><FONT FACE="Georgia, serif"><SPAN STYLE="background: #ffffff">benefits
in flexibility and readability outweigh the costs.</SPAN></FONT><FONT FACE="Georgia, serif"><FONT SIZE=6><SPAN STYLE="background: #ffffff">”</SPAN></FONT></FONT></P>
<p><A HREF="http://robots.thoughtbot.com/how-we-test-rails-applications">How ThoughtBot Tests Applications</A></P>
<p>
</P>
<H1>MiniTest with Capybara and Fixtures</H1>
<p>
</P>
<p>Mike Moore has created the ‘minitest-rails-capybara’ gem, which is a wrapper to
provide integration of Capybara and MiniTest in Rails.</P>
<p>     
<A HREF="https://github.com/blowmage/minitest-rails-capybara">minitest-rails-capybara gem</A></P>
<p>
</P>
<p>Here is one approach for setting up for feature testing  with MiniTest and Capybara. Add the following to your Gemfile:</P>
<pre>
<code class="ruby">
group :test do
  gem 'minitest-rails-capybara'
  gem 'minitest-reporters'
  gem 'simplecov'
end

group :development do
  # Unhandled exception raised but not rescued 
  # will open pry automatically
  gem 'pry-rescue'
  gem 'pry-stack_explorer'
  # causes rails console to open  pry 
  gem 'pry-rails'
end

</code>
</pre>
<p>
</P>
<p>
  <span class="code-blue code-shift">
  bundle install<br/></span> 
  <span class="code-blue code-shift">
  bundle exec rails generate minitest:install
  </span>
</p>
<p></p>
<p>To force the spec
style syntax, add the following block to <I>config/application.rb</I>:</P>
<p></p>
<pre>
<code class="ruby">
# Use Minitest for generating new tests.
config.generators do |g|
  g.test_framework :minitest, spec: true
end
</code>
</pre>
<p></p>
<p>
  Run minitest installer:
</P>
  <p>
  	<span class="code-blue code-shift">
bundle exec rails g minitest:install
  </span>	
  </p>
<p></p>
<p>Modify
<I>test/test_helper.rb </I> as
indicated below:</P>
<p><BR>
</P>
<pre>
<code class="ruby">
# test/test_helper.rb
ENV["RAILS_ENV"] = "test"
require File.expand_path("../../config/environment", __FILE__)
require "rails/test_help"
require "minitest/rails"
require "minitest/rails/capybara"
require "simplecov"

require "minitest/reporters"
Minitest::Reporters.use!(
  Minitest::Reporters::SpecReporter.new,
  ENV,
  Minitest.backtrace_filter
)
class ActiveSupport::TestCase
  ActiveRecord::Migration.check_pending!
  fixtures :all
end
class ActionDispatch::IntegrationTest
  extend MiniTest::Spec::DSL
  include Capybara::DSL
end
</code>
</pre>
<p></p>
<p>Capybara is
different than Rails Integration tests, so you must use:</P>
<p>
	<span class="code-blue">
Capybara::Rails::TestCase
</span>	
</p>
<p>for your feature
tests.</P>
<p>You can use the minitest generator to create your tests:</P>
<p><span class="code-blue code-shift">bundle exec rails generate minitest:feature CheckForZurb</span></P>
<p>
</P>
<p><span class="code-red">Warning! All instructions are for Rails 4.1, above would be</span></P>
<p><span class="code-blue code-shift">bundle exec rails generate mini_test:feature CheckForZurb</span></P>
<p><span class="code-red">for minitest-rails v1.x</span></P>
<p><br/></p>
<h3>Example Feature Test</h3>

<pre>
	<code class="ruby">
# test/features/check_for_zurb_test.rb
require 'test_helper'

class CheckForZurbTest < Capybara::Rails::TestCase
  def  zurb_is_installed
    visit root_path
    assert page.has_content?('foundation')
  end
end
</code>	
</pre>
<p></p>

<p>Use Capybara’s
spec DSL by providing the --spec option</P>
<p></p>

<p><span class="code-blue code-shift">bundle exec rails generate minitest:feature CheckForZurb --spec</span></P>
<p>This will create a feature test using Capybara spec DSL:</P>
<p></p>
<pre>
<code class="ruby">
# test/feature/check_for_zurb_test.rb
require "test_helper"
feature "CheckForZurb" do
  scenario "When visiting the page Zurb Foundation will be installed" do
    visit root_path
    page.source.must_include("foundation") 
    page.wont_have_content "Goodbye All!"
  end
end
</code>
</pre>
<p></p>
<p>Setting the metadata to specify a driver:</P>
<pre>
<code class="ruby">
feature "Can Access Home" do
  scenario "has content", js: true do
    visit root_path # Visited with JavaScript driver
    page.must_have_content "Home#index"
  end
end
</code>
</pre>
<p></p>
<p>To generate a
test other than</P>
<p>
	<span class="code-blue code-shift">
rails generate minitest:feature CheckForZurb
</span>	
</p>
<p></p>
<p>a feature test as above, just substitute</P>
<UL>
	<LI>controller</li>
	<LI>integration</li>
	<LI>mailer</li>
	<LI>model</li>
</UL>
<p>
</P>
<p>for feature, and if
you wish it to be spec style add the <FONT COLOR="#0000ff">--spec
</FONT>flag.</P>
<p>
</P>
<H1>Mixing It Up with Feature Tests and Capybara</H1>
<p>
</P>
<p>One of the purposes
of feature tests is to use the full Rails stack,  from the GUI to the
 backend and back again. This thorough workout of a specific slice of
functionality ensures that the code works when exposed to all levels
of the stack. Also, it can be desirable to do feature testing in a
‘black box’ environment  which is API agnostic,  thus removing
any dependency on hard-wired relationships.</P>
<p>Capybara is used for automating your browser for feature tests, and has its own DSL. The setup is different for MiniTest and Rspec so they will be covered separately .</P>
<p>      <A HREF="http://www.rubydoc.info/github/jnicklas/capybara/master"><FONT COLOR="#880000"><U>Capybara
Reference Manual</U></FONT></A></P>
<p>
</P>
<H2>MiniTest with Capybara and Factory Girl</H2>
<P>If you are using a javascript capable
driver like Selenium for integration testing, browser actions are run
in another thread. This prevents you from seeing the data which was
set up elsewhere. Since Factory Girl uses a database transaction for
data setup, it is necessary to resort to a truncation strategy. Here
is an example of <I>test/test_helper.rb </I>set up to handle the
transactions used by Factory Girl in an integration test:</P>
<P>
</P>
<pre>
<code class="ruby">
# test/test_helper.rb
require 'minitest-rails'
# Add gem "minitest-rails-capybara" to the test group of your Gemfile
# and uncomment the following if you want Capybara feature tests
require "capybara/rails"
require "capybara/rspec/matchers"
require "minitest/rails/capybara"


ENV["RAILS_ENV"] ||= "test"
require File.expand_path('../../config/environment', __FILE__)
require 'rails/test_help'

Dir[Rails.root.join('test', 'support', '*.rb')].each do |file|
  require file
end

class ActiveSupport::TestCase
  ActiveRecord::Migration.check_pending!
  include FactoryGirl::Syntax::Methods
  include AllTestHelper
  DatabaseCleaner.strategy = :truncation
  before { DatabaseCleaner.start }
  after  { DatabaseCleaner.clean } 
end
class MiniTest::Spec
  include FactoryGirl::Syntax::Methods
  include AllTestHelper
end
class Capybara::Rails::TestCase
  include Rails.application.routes.url_helpers 
  include Capybara::DSL
  include Capybara::Assertions
  include IntegrationTestHelper
  include FactoryGirl::Syntax::Methods
  DatabaseCleaner.strategy = :truncation
  before { DatabaseCleaner.start }
  after  { DatabaseCleaner.clean } 
end
</code>
</pre>
<p></p>
<H3 CLASS="western" STYLE="margin-bottom: 0.17in; line-height: 150%"><A NAME="h.c1xlbwale1cn"></A>
<FONT COLOR="#434343">Compatibility</FONT></H3>
<p><SPAN STYLE="background: #ffffff">Minitest
and Rspec spec DSL are not compatible so do not load both of them. If
your tests using the spec DSL are not running, be sure and check the
dependencies to be sure that Rspec DSL is not loaded.</SPAN></P>
<p><BR>
</P>
<p>Matt Sears put
together a MiniTest Quick Reference listing matchers and assertions. 
  
</P>
<p><BR>
</P>
<p>     <FONT COLOR="#880000">
</FONT><A HREF="http://www.mattsears.com/articles/2011/12/10/minitest-quick-reference"><FONT COLOR="#880000"><U>MiniTest
Quick Reference</U></FONT></A></P>
<p><BR>
</P>
<p><FONT SIZE=3>Following
is a partial listing from above link:</FONT></P>
<H2 CLASS="western" STYLE="margin-top: 0.32in; margin-bottom: 0.15in; line-height: 150%"><A NAME="h.2319sth36rb5"></A>
MiniTest::Spec</H2>
<P STYLE="margin-bottom: 0.18in; line-height: 150%"><FONT COLOR="#222222"><FONT SIZE=3><SPAN STYLE="background: #ffffff">Provides
RSpec-like matchers and contexts right out of the box.</SPAN></FONT></FONT></P>
<H4 CLASS="western" STYLE="margin-bottom: 0.18in; line-height: 150%"><A NAME="h.msz34hj6bkxy"></A>
<FONT COLOR="#000000">Matchers (must | wont)</FONT></H4>
<P STYLE="margin-bottom: 0.18in; line-height: 150%"><SPAN STYLE="background: #ffffff">In
most cases you can switch between must for positive expectations and
wont for negative expectations.</SPAN></P>
<p><BR>
</P>
<TABLE WIDTH=646 CELLPADDING=7 CELLSPACING=0>
	<COL WIDTH=171>
	<COL WIDTH=445>
	<TR VALIGN=TOP>
		<TD WIDTH=171 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">Assertion</SPAN></P>
		</TD>
		<TD WIDTH=445 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">Examples</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=171 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">must_be</SPAN></P>
		</TD>
		<TD WIDTH=445 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">labels.size.must_be :==, 0</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=171 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">must_be_close_to</SPAN></P>
		</TD>
		<TD WIDTH=445 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">traits.size.must_be_close_to
			1,1</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=171 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">must_be_empty</SPAN></P>
		</TD>
		<TD WIDTH=445 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">labels.must_be_empty</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=171 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">must_be_instance_of</SPAN></P>
		</TD>
		<TD WIDTH=445 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">hipster.must_be_instance_of
			Hipster</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=171 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">must_be_kind_of</SPAN></P>
		</TD>
		<TD WIDTH=445 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">labels.must_be_kind_of
			Enumerable</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=171 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">must_be_nil</SPAN></P>
		</TD>
		<TD WIDTH=445 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">labels.first.must_be_nil</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=171 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">must_be_same_as</SPAN></P>
		</TD>
		<TD WIDTH=445 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">traits.must_be_same_as traits</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=171 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">must_be_silent</SPAN></P>
		</TD>
		<TD WIDTH=445 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">proc { &quot;no stdout or
			stderr&quot; }.must_be_silent</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=171 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">must_be_within_epsilon</SPAN></P>
		</TD>
		<TD WIDTH=445 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">traits.size.must_be_within_epsilon
			1,1</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=171 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">must_equal</SPAN></P>
		</TD>
		<TD WIDTH=445 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">traits.size.must_equal 2</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=171 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">must_include</SPAN></P>
		</TD>
		<TD WIDTH=445 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">traits.must_include &quot;skinny
			jeans&quot;</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=171 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">must_match</SPAN></P>
		</TD>
		<TD WIDTH=445 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">traits.first.must_match
			/silly/</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=171 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">must_output</SPAN></P>
		</TD>
		<TD WIDTH=445 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">proc { print
			&quot;#{traits.size}!&quot; }.must_output &quot;2!&quot;</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=171 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">must_respond_to</SPAN></P>
		</TD>
		<TD WIDTH=445 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">traits.must_respond_to :count</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=171 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">must_raise</SPAN></P>
		</TD>
		<TD WIDTH=445 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">proc { traits.foo
			}.must_raise NoMethodError</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=171 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">must_send</SPAN></P>
		</TD>
		<TD WIDTH=445 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">traits.must_send [traits,
			:values_at, 0]</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=171 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">must_throw</SPAN></P>
		</TD>
		<TD WIDTH=445 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">proc { throw Exception if
			traits.any? }.must_throw Exception</SPAN></P>
		</TD>
	</TR>
</TABLE>
<p><BR>
</P>
<H4 CLASS="western" STYLE="margin-top: 0in; line-height: 150%"><A NAME="h.l54oatpxinrk"></A>
<FONT COLOR="#000000"><FONT FACE="Arial, serif"><SPAN STYLE="background: #ffffff">Assertions
(assert | refute)</SPAN></FONT></FONT></H4>
<p><SPAN STYLE="background: #ffffff">Toggle
between assert for positive assertions and refute for negative
assertions.</SPAN></P>
<TABLE WIDTH=642 CELLPADDING=7 CELLSPACING=0>
	<COL WIDTH=141>
	<COL WIDTH=471>
	<TR VALIGN=TOP>
		<TD WIDTH=141 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">Assertion</SPAN></P>
		</TD>
		<TD WIDTH=471 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">Example</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert</SPAN></P>
		</TD>
		<TD WIDTH=471 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert @traits.any?, &quot;empty
			subjects&quot;</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_empty</SPAN></P>
		</TD>
		<TD WIDTH=471 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_empty @labels</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_equal</SPAN></P>
		</TD>
		<TD WIDTH=471 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_equal 2, @traits.size</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_in_delta</SPAN></P>
		</TD>
		<TD WIDTH=471 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_in_delta @traits.size,
			1,1</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_in_epsilon</SPAN></P>
		</TD>
		<TD WIDTH=471 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_in_epsilon
			@traits.size, 1, 1</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_includes</SPAN></P>
		</TD>
		<TD WIDTH=471 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_includes @traits,
			&quot;skinny jeans&quot;</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_instance_of</SPAN></P>
		</TD>
		<TD WIDTH=471 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_instance_of Hipster,
			@hipster</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_kind_of</SPAN></P>
		</TD>
		<TD WIDTH=471 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_kind_of Enumerable,
			@labels</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_match</SPAN></P>
		</TD>
		<TD WIDTH=471 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_match @traits.first,
			/silly/</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_nil</SPAN></P>
		</TD>
		<TD WIDTH=471 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_nil @labels.first</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_operator</SPAN></P>
		</TD>
		<TD WIDTH=471 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_operator @labels.size,
			:== , 0</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_output</SPAN></P>
		</TD>
		<TD WIDTH=471 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_output(&quot;Size: 2&quot;)
			{ print &quot;Size: #{@traits.size}&quot;}</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_raises</SPAN></P>
		</TD>
		<TD WIDTH=471 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_raises(NoMethodError)
			{ @traits.foo }</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_respond_to</SPAN></P>
		</TD>
		<TD WIDTH=471 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_respond_to @traits,
			:count</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_same</SPAN></P>
		</TD>
		<TD WIDTH=471 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_same @traits, @traits,
			&quot;It's the same object silly&quot;</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_send</SPAN></P>
		</TD>
		<TD WIDTH=471 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_send [@traits,
			:values_at, 0]</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_silent</SPAN></P>
		</TD>
		<TD WIDTH=471 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_silent { &quot;no
			stdout or stderr&quot; }</SPAN></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_throws</SPAN></P>
		</TD>
		<TD WIDTH=471 STYLE="border: 1px solid #dddddd; padding: 0in 0.08in">
			<P><SPAN STYLE="background: #ffffff">assert_throws(Exception,'is
			empty') {throw Exception if @traits.any?}</SPAN></P>
		</TD>
	</TR>
</TABLE>
<p><BR>
</P>
<H2 CLASS="western" STYLE="line-height: 150%"><A NAME="h.kqqp0v30kv19"></A>
</H2>
<H2 CLASS="western" STYLE="line-height: 150%"><A NAME="h.u5pl4e4q6l4o"></A>
Rspec with Capybara and Factory Girl</H2>
<p><BR>
</P>
<P STYLE="margin-bottom: 0.17in; line-height: 150%"><FONT FACE="Consolas, serif">Start
out by configuring your Gemfile:</FONT></P>
<P STYLE="margin-bottom: 0.11in; line-height: 150%"><FONT COLOR="#000088"><FONT FACE="Consolas, serif">group</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">
</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">:</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">development</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">,</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">
</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">:</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">test
</FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">do</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><BR>
 gem </FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif">'rspec-rails'</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">,</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">
</FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif">'~&gt;
3.0.0'</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">
<BR>  gem </FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif">'factory_girl_rails'</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><BR>
 gem </FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif">'capybara'</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><BR>
 gem </FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif">'database_cleaner'</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><BR></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">end</FONT></FONT></P>
<P STYLE="margin-bottom: 0.17in; line-height: 150%"><FONT FACE="Consolas, serif">Run
Rspec generator to create initial framework:</FONT></P>
<P STYLE="margin-bottom: 0.17in; line-height: 150%">     <FONT COLOR="#0000ff"><B>rails
generate rspec:install</B></FONT></P>
<P STYLE="margin-bottom: 0.11in; line-height: 150%">Add the following
to  <I>rails_helper.rb </I> to  make Capybara available within 
Rspec:</P>
<P STYLE="margin-bottom: 0.11in; line-height: 150%">      <FONT COLOR="#880000"><FONT FACE="Consolas, serif"><I>#
spec/rails_helper.rb</I></FONT></FONT></P>
<P STYLE="margin-bottom: 0.11in; line-height: 150%">      <FONT COLOR="#000088"><FONT FACE="Consolas, serif">require</FONT></FONT><FONT FACE="Consolas, serif">
</FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif">'capybara/rails'</FONT></FONT></P>
<P STYLE="margin-bottom: 0.11in; line-height: 150%">   <FONT COLOR="#880000"><FONT FACE="Consolas, serif">#
Insert the following additions into the Rspec configure block</FONT></FONT></P>
<P STYLE="margin-bottom: 0.11in; line-height: 150%">  
<FONT COLOR="#660066"><FONT FACE="Consolas, serif">RSpec</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">.</FONT></FONT><FONT FACE="Consolas, serif">configure
</FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">do</FONT></FONT><FONT FACE="Consolas, serif">
</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">|</FONT></FONT><FONT FACE="Consolas, serif">config|</FONT></P>
<p>      <FONT COLOR="#000088"><FONT FACE="Consolas, serif">require</FONT></FONT><FONT FACE="Consolas, serif">
</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">'</FONT></FONT><FONT FACE="Consolas, serif">database_cleaner</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">'</FONT></FONT><FONT FACE="Consolas, serif">
 </FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"># setting
up for Capybara/Selenium testing</FONT></FONT></P>
<p><FONT COLOR="#880000">
     <FONT FACE="Consolas, serif"># disable Rails implicit wrapping
of test in database transaction</FONT></FONT></P>
<p><FONT COLOR="#880000">
     <FONT FACE="Consolas, serif"># essential to disable this if
testing with Capybara/Selenium</FONT></FONT></P>
<p><FONT COLOR="#880000">
     <FONT FACE="Consolas, serif"># and you wish to eliminate
poundage of head against wall</FONT></FONT></P>
<p><FONT COLOR="#880000">
     </FONT><FONT FACE="Consolas, serif">config</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">.</FONT></FONT><FONT FACE="Consolas, serif">use_transactional_fixtures
</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">=</FONT></FONT><FONT FACE="Consolas, serif">
</FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">false</FONT></FONT></P>
<p><FONT COLOR="#000088">
     </FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"># Set
up for Capybara/Selenium feature tests:</FONT></FONT></P>
<p><FONT COLOR="#880000">
     </FONT><FONT FACE="Consolas, serif">config</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">.</FONT></FONT><FONT FACE="Consolas, serif">before</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">(:</FONT></FONT><FONT FACE="Consolas, serif">suite</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">)</FONT></FONT><FONT FACE="Consolas, serif">
</FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">do</FONT></FONT></P>
<p><FONT COLOR="#000088">
        </FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif">DatabaseCleaner</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">.</FONT></FONT><FONT FACE="Consolas, serif">clean_with</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">(:</FONT></FONT><FONT FACE="Consolas, serif">truncation</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">)</FONT></FONT></P>
<p><FONT COLOR="#666600">
     </FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">end</FONT></FONT></P>
<p><FONT COLOR="#000088">
     </FONT><FONT FACE="Consolas, serif">config</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">.</FONT></FONT><FONT FACE="Consolas, serif">before</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">(:</FONT></FONT><FONT FACE="Consolas, serif">each</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">)</FONT></FONT><FONT FACE="Consolas, serif">
</FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">do</FONT></FONT></P>
<p><FONT COLOR="#000088">
        </FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif">DatabaseCleaner</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">.</FONT></FONT><FONT FACE="Consolas, serif">strategy
</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">=</FONT></FONT><FONT FACE="Consolas, serif">
</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">:</FONT></FONT><FONT FACE="Consolas, serif">transaction</FONT></P>
<p>      <FONT COLOR="#000088"><FONT FACE="Consolas, serif">end</FONT></FONT></P>
<p>     
<FONT FACE="Consolas, serif">config</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">.</FONT></FONT><FONT FACE="Consolas, serif">before</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">(:</FONT></FONT><FONT FACE="Consolas, serif">each</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">,</FONT></FONT><FONT FACE="Consolas, serif">
</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">:</FONT></FONT><FONT FACE="Consolas, serif">js
</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">=&gt;</FONT></FONT><FONT FACE="Consolas, serif">
</FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">true</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">)</FONT></FONT><FONT FACE="Consolas, serif">
</FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">do</FONT></FONT></P>
<p>        
<FONT COLOR="#660066"><FONT FACE="Consolas, serif">DatabaseCleaner</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">.</FONT></FONT><FONT FACE="Consolas, serif">strategy
</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">=</FONT></FONT><FONT FACE="Consolas, serif">
</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">:</FONT></FONT><FONT FACE="Consolas, serif">truncation</FONT></P>
<p>      <FONT COLOR="#000088"><FONT FACE="Consolas, serif">end</FONT></FONT></P>
<p>     
<FONT FACE="Consolas, serif">config</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">.</FONT></FONT><FONT FACE="Consolas, serif">before</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">(:</FONT></FONT><FONT FACE="Consolas, serif">each</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">)</FONT></FONT><FONT FACE="Consolas, serif">
</FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">do</FONT></FONT></P>
<p>        
<FONT COLOR="#660066"><FONT FACE="Consolas, serif">DatabaseCleaner</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">.</FONT></FONT><FONT FACE="Consolas, serif">start</FONT></P>
<p>      <FONT COLOR="#000088"><FONT FACE="Consolas, serif">end</FONT></FONT></P>
<p>     
<FONT FACE="Consolas, serif">config</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">.</FONT></FONT><FONT FACE="Consolas, serif">after</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">(:</FONT></FONT><FONT FACE="Consolas, serif">each</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">)</FONT></FONT><FONT FACE="Consolas, serif">
</FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">do</FONT></FONT></P>
<p>        
<FONT COLOR="#660066"><FONT FACE="Consolas, serif">DatabaseCleaner</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">.</FONT></FONT><FONT FACE="Consolas, serif">clean</FONT></P>
<p>      <FONT COLOR="#000088"><FONT FACE="Consolas, serif">end</FONT></FONT></P>
<p>   <FONT COLOR="#000088"><FONT FACE="Consolas, serif">end</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><BR></FONT></FONT><BR>
</P>
<p>Be warned:  The
database_cleaner strategy is a monkey-patched</P>
<p>kludge which depends
upon ActiveRecord  refraining from changing its connection-sharing
internals. It is reported to have created race conditions with
postgresql in combination with certain Ruby VM’s.</P>
<p><FONT COLOR="#0000ff">
          </FONT>
</P>
<P STYLE="margin-bottom: 0.11in; line-height: 150%">Create a
directory for your features:</P>
<P STYLE="margin-bottom: 0.11in; line-height: 150%">	<FONT COLOR="#0000ff"><B>mkdir
spec/features</B></FONT></P>
<p>Now when you run 
</P>
<p>	<FONT COLOR="#0000ff"><B>bundle
exec rails g resource post title content:text published:boolean</B></FONT></P>
<p>you should get
output similar to:</P>
<p><BR>
</P>
<P STYLE="margin-bottom: 0.11in; line-height: 150%"><FONT FACE="Droid Serif, serif"><FONT SIZE=2>invoke
 active_record<BR>create   
db/migrate/20140630160246_create_posts.rb<BR>create   
app/models/post.rb<BR>invoke    rspec<BR>create     
spec/models/post_spec.rb<BR>invoke      factory_girl<BR>create       
spec/factories/posts.rb<BR>invoke  controller<BR>create   
app/controllers/posts_controller.rb<BR>invoke    erb<BR>create     
app/views/posts<BR>invoke    rspec<BR>create     
spec/controllers/posts_controller_spec.rb<BR>invoke    helper<BR>create
     app/helpers/posts_helper.rb<BR>invoke      rspec<BR>create      
 spec/helpers/posts_helper_spec.rb<BR>invoke    assets<BR>invoke     
coffee<BR>create        app/assets/javascripts/posts.js.coffee<BR>invoke
     scss<BR>create       
app/assets/stylesheets/posts.css.scss<BR>invoke  resource_route<BR>route
   resources :posts</FONT></FONT></P>
<P STYLE="margin-bottom: 0.11in; line-height: 150%"><FONT COLOR="#343434">Now
you will be able to write feature tests like the following:</FONT></P>
<P STYLE="margin-bottom: 0.11in; line-height: 150%"><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><I>#
spec/features/user_creates_a_foobar_spec.rb</I></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><BR>feature
</FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif">'User
visits Posts Index'</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">
</FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">do</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><BR>
 scenario </FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif">'Navigating
to Post Index, a list of posts is seen'</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">
</FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">do</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><BR>
   visit posts_path<BR>    expect</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">(</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">page</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">).</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">to
have_content posts</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">(:</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">wave</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">).</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">title<BR>
 </FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">end</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><BR></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">end</FONT></FONT></P>
<H1 CLASS="western" STYLE="margin-bottom: 0.11in; line-height: 150%"><A NAME="h.jo77bb1bbs4m"></A>
Mocking and Stubbing</H1>
<P>Testing should be simple, fast, and
indempotent.</P>
<P>The purpose of stubbing is to replace
classes or components that 
</P>
<P>may be complex or slow the test down
but still preserve the interface.</P>
<P><BR>
</P>
<P>For instance, you can create a stub
that will return false records but still</P>
<P>satisfy the needs of the test. The
caveat of using stubs is that you have 
</P>
<P>to be careful not to remove too much of
the real world. You really do need</P>
<P>to interact with your database at some
point to see if all is well.</P>
<P><BR>
</P>
<P>With a stub you want to accomplish 2
things:</P>
<UL>
	<LI><P>Replace a part of the real system
	in your test case with a stub.</P>
	<LI><P>Have the stub duplicate behavior
	of the real system part you replace.</P>
</UL>
<P><BR>
</P>
<P>A mock object is similar to a stub
object. However, it has the added 
</P>
<P>functionality of checking how the
client code actually uses the object.</P>
<P>It does this with behavior
verification, to ensure that the mock object is</P>
<P>interacting with the client code in the
manner we expect, it is fullfilling our</P>
<P>expectations.</P>
<P><BR>
</P>
<P>Following is a list of popular mocking
and stubbing solutions in Rails:</P>
<UL>
	<LI><P><A HREF="https://github.com/seattlerb/minitest"><FONT COLOR="#880000"><U>MiniTest
	Mock</U></FONT></A></P>
	<LI><P><A HREF="http://gofreerange.com/mocha/docs/"><FONT COLOR="#880000"><U>Mocha</U></FONT></A><FONT COLOR="#880000">
	</FONT>
	</P>
	<LI><P><A HREF="https://github.com/jimweirich/flexmock"><FONT COLOR="#880000"><U>FlexMock</U></FONT></A></P>
	<LI><P><A HREF="https://github.com/rspec/rspec-mocks"><FONT COLOR="#880000"><U>Rspec
	Mocks</U></FONT></A></P>
</UL>
<P><BR>
</P>
<H1 CLASS="western"><A NAME="h.j3sfekp52jck"></A>Page Object Pattern</H1>
<H1 CLASS="western"><A NAME="h.j3sfekp52jck1"></A></H1>
<P>The concept of a page object is to wrap
an HTML page or fragment in order to manipulate page elements without
digging into the HTML. Tests that manipulate page elements directly
are brittle to changes in the UI.</P>
<P><BR>
</P>
<P>Objectives in creating a page object:</P>
<UL>
	<LI><P>Allow a software client to do
	anything a human looking at the page can do</P>
	<LI><P>Provide interface that hides
	underlying widgetry of window and is easy to use</P>
	<LI><P>Encapsulate mechanics required to
	find and manipulate the data in the GUI control.</P>
	<LI><P>Model the structure in the page
	that makes sense to the user of the application, complex UI
	structures should not be revealed by the page object.</P>
	<LI><P>Page objects are not usually built
	for each page, but rather significant elements of a page such as
	header, footer, contact form, etc.</P>
	<LI><P>If you navigate to another page,
	initial page object should return another page object for the new
	page.</P>
	<LI><P>Page objects should return
	fundamental types [string date] or other page objects.</P>
</UL>
<P><BR>
</P>
<P>“<FONT COLOR="#303633"><FONT SIZE=3><SPAN STYLE="background: #ffffff">Page
objects are commonly used for testing, but should not make assertions
themselves. Their responsibility is to provide access to the state of
the underlying page. It's up to test clients to carry out the
assertion logic.” ---Martin Fowler</SPAN></FONT></FONT></P>
<P><BR>
</P>
<P><FONT SIZE=3>Please read the excellent
article on page objects by Martin Fowler if you are interested in
this topic.</FONT></P>
<P><BR>
</P>
<P>      <A HREF="http://martinfowler.com/bliki/PageObject.html"><FONT COLOR="#aa0000"><FONT SIZE=3><U>Page
Object by Martin Fowler</U></FONT></FONT></A></P>
<P><BR>
</P>
<P><FONT SIZE=3>Gems to enhance the use of
Page Object.</FONT></P>
<UL>
	<LI><P><A HREF="http://www.rubydoc.info/gems/site_prism/frames"><FONT COLOR="#aa0000"><FONT SIZE=3><U>Site
	Prism Wiki</U></FONT></FONT></A><FONT COLOR="#aa0000"><FONT SIZE=3> 
	    </FONT></FONT><A HREF="https://github.com/natritmeyer/site_prism"><FONT COLOR="#aa0000"><FONT SIZE=3><U>Github</U></FONT></FONT></A><FONT COLOR="#aa0000"><FONT SIZE=3>
	  </FONT></FONT>
	</P>
	<LI><P><A HREF="https://github.com/cheezy/page-object/wiki/page-object"><FONT COLOR="#aa0000"><FONT SIZE=3><U>Page-Object
	Wiki</U></FONT></FONT></A><FONT COLOR="#aa0000"><FONT SIZE=3>  
	</FONT></FONT><A HREF="https://github.com/cheezy/page-object"><FONT COLOR="#aa0000"><FONT SIZE=3><U>Github</U></FONT></FONT></A></P>
</UL>
<P><BR>
</P>
<P><BR>
</P>
<H1 CLASS="western"><A NAME="h.fuo4sl5p1cz6"></A>Debugging:
Opinionated Programming</H1>
<P><BR>
</P>
<P>What to do when your test fails?</P>
<UL>
	<LI><P>Check for syntax errors</P>
	<LI><P>Review test data</P>
	<LI><P>Analyze your logic and algorithms</P>
	<LI><P>Fire up Pry</P>
</UL>
<P><BR>
</P>
<P>You can fire up the Rails console which
uses irb, then use debugger to inspect your code, set breakpoints,
etc.  But why would you want to do this when the most excellent pry
gem is available? If you have not tried pry, you owe it to yourself
to give it a road test. Who knows? Besides finding yourself in a
state of bliss you may also save humanity from imminent destruction.</P>
<P><BR>
</P>
<H2 CLASS="western"><A NAME="h.w0etm5y3ok2v"></A>Pry</H2>
<UL>
	<LI><P><A HREF="https://github.com/pry/pry"><FONT COLOR="#aa0000"><U>Pry</U></FONT></A></P>
	<LI><P><A HREF="https://github.com/pry/pry/wiki"><FONT COLOR="#aa0000"><U>Pry
	Wiki</U></FONT></A></P>
</UL>
<P><BR>
</P>
<P><BR>
</P>
<P>Easily set a breakpoint by entering</P>
<P><BR>
</P>
<P>      binding.pry</P>
<P><BR>
</P>
<P>in a model or controller. You can also
enter</P>
<P><BR>
</P>
<P>      &lt;% require ‘pry’;
binding.pry %&gt;  
</P>
<P><BR>
</P>
<P>in a view to set a break point.</P>
<P><BR>
</P>
<H2 CLASS="western"><A NAME="h.ymfee1hr87gl"></A>Pry-rescue gem</H2>
<P><BR>
</P>
<P>Whenever something goes wrong, e.g.
there is an unhandled exception,</P>
<P>pry-rescue will automatically open pry
for you.</P>
<P><BR>
</P>
<P>Add the following to your Gemfile.</P>
<P><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 145%"><FONT COLOR="#000088">
  </FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">group</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">:</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">development
</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">do</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR>
    gem </FONT></FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">'pry-rescue'</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR>
    gem </FONT></FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">'pry-stack_explorer'</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR>
  </FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">end</FONT></FONT></FONT></P>
<P><BR>
</P>
<H2 CLASS="western"><A NAME="h.rxn09r77namc"></A>Git</H2>
<P><BR>
</P>
<P>Search using regex for all differences
in added or removed lines</P>
<P>matches the given regular expression.</P>
<P><BR>
</P>
<P>      <FONT COLOR="#0000ff">git log
-G”^[a-zA-Z0-9_-]*_widget$” --pretty=oneline</FONT></P>
<P><BR>
</P>
<P>Compare current state of file with that
of a specific commit</P>
<P><BR>
</P>
<P>      <FONT COLOR="#0000ff">git diff
4dc72 -- app/models/user.rb</FONT></P>
<P><BR>
</P>
<P>When a bug is current and you know it
was not in the past, pick</P>
<P>a commit in the past where your code
was good.  Now you need to</P>
<P><BR>
</P>
<P>      <FONT COLOR="#0000ff">git bisect
start</FONT></P>
<P><BR>
</P>
<P>You will then proceed with setting the
status of the current commit.</P>
<P><BR>
</P>
<P>      <FONT COLOR="#0000ff">git bisect
bad</FONT></P>
<P><BR>
</P>
<P>Next you select a commit where you know
the code functioned properly</P>
<P>and set the status for that.</P>
<P><BR>
</P>
<P>      <FONT COLOR="#0000ff">git bisect
good &lt;sha&gt;</FONT></P>
<P><BR>
</P>
<P>You proceed with this process until you
have identified where the bad code</P>
<P>was introduced.</P>
<UL>
	<LI><P><A HREF="http://hashrocket.com/blog/posts/finding-failure-git-bisect"><FONT COLOR="#aa0000"><U>Finding
	Failure: Git Bisect</U></FONT></A></P>
</UL>
<P><BR>
</P>
<H2 CLASS="western"><A NAME="h.b2e79guzer45"></A>Debugging
Opportunities in Rails.</H2>
<P><BR>
</P>
<P>See what routes are really available.</P>
<UL>
	<LI><P><A HREF="http://localhost:3000/rails/info/routes"><FONT COLOR="#aa0000"><U>http://localhost:3000/rails/info/routes</U></FONT></A></P>
</UL>
<P><BR>
</P>
<P>Gem for style, lint, metrics, and Rails
specific checking.</P>
<UL>
	<LI><P><A HREF="https://github.com/bbatsov/rubocop"><FONT COLOR="#aa0000"><U>Rubocop</U></FONT></A></P>
</UL>
<P><BR>
</P>
<P>Vim specific plugin for syntax
checking.</P>
<UL>
	<LI><P><A HREF="https://github.com/scrooloose/syntastic"><FONT COLOR="#aa0000"><U>Syntastic</U></FONT></A></P>
</UL>
<P><BR>
</P>
<P>Check all available Rake tasks</P>
<UL>
	<LI><P><FONT COLOR="#0000ff">rake -T</FONT></P>
</UL>
<P><BR>
</P>
<P>Check what middleware is in use.</P>
<UL>
	<LI><P><FONT COLOR="#0000ff">rake
	middleware</FONT></P>
</UL>
<P><BR>
</P>
<P>See all gems actually used, and version
numbers.</P>
<UL>
	<LI><P><FONT COLOR="#0000ff">less
	Gemfile.lock</FONT></P>
</UL>
<H1 CLASS="western"><A NAME="h.6l8s9zfp0mr4"></A>Speeding Up your
Test Environment</H1>
<P><BR>
</P>
<P>Ryan Bates  has compiled various
methods of</P>
<P>optimizing your test environment in
this Railscast, 
</P>
<P>including use of the ‘parallelize_me’
method in minitest.</P>
<UL>
	<LI><P><A HREF="http://railscasts.com/episodes/413-fast-tests?view=comments"><FONT COLOR="#aa0000"><U>Fast
	Tests</U></FONT></A></P>
</UL>
<P><BR>
</P>
<P><BR>
</P>
<H1 CLASS="western" STYLE="line-height: 150%"><A NAME="h.6eme78v8yp1z"></A>
<FONT COLOR="#008000"><U><B>Prenascent Test Paradigm</B></U></FONT></H1>
<p><BR>
</P>
<p>It is most
beneficial in testing when the code itself is clarity, integrity,
simplicity.</P>
<p><BR>
</P>
<p><FONT COLOR="#222222">“</FONT><FONT COLOR="#222222"><FONT FACE="Georgia, serif"><FONT SIZE=4>O</FONT></FONT></FONT><FONT COLOR="#222222"><FONT FACE="Georgia, serif">ften,
when you can express an idea in a single sentence, you have a good
shot at implementing that idea in a single line or two of Ruby code.</FONT></FONT><FONT COLOR="#222222"><FONT SIZE=5><B>”</B></FONT></FONT></P>
<P STYLE="margin-bottom: 0.17in; line-height: 150%"><FONT FACE="Consolas, serif">						---Bruce
Tate</FONT></P>
<P STYLE="margin-bottom: 0.17in; line-height: 150%"><BR><BR>
</P>
<H2 CLASS="western" STYLE="margin-bottom: 0.17in; line-height: 150%"><A NAME="h.u67lg0kx7fcd"></A>
Addendum - Helpful Information</H2>
<H3 CLASS="western"><A NAME="h.xhymph2nb8uj"></A>Testing Pundit
Authorization Policies with Minitest</H3>
<P><BR>
</P>
<P>An example of Pundit policy testing on
Stack Overflow using Minitest and factories. The example could be
adjusted for use with fixtures.</P>
<P><BR>
</P>
<UL>
	<LI><P><A HREF="http://stackoverflow.com/questions/20256893/how-to-test-pundit-policies-with-minitest"><FONT COLOR="#880000"><U>
	Pundit Policy Testing</U></FONT></A><FONT COLOR="#880000">    </FONT>
	</P>
</UL>
<P><BR>
</P>
<H3 CLASS="western"><A NAME="h.mdir6tl8oszr"></A>Factory Girl</H3>
<P><BR>
</P>
<P>Complicated relationships in factories
on RailsGuide.net, solved using ignore/transient.</P>
<P><BR>
</P>
<UL>
	<LI><P><A HREF="http://railsguides.net/integral-factories-in-tests-with-factory-girl/"><FONT COLOR="#880000"><U>Integral
	Factories</U></FONT></A></P>
</UL>
<P><BR>
</P>
<P><BR>
</P>
<P>Test factories first using spec syntax.</P>
<P><BR>
</P>
<H4 CLASS="western"><A NAME="h.xdud4muxk9n0"></A>Rspec Example</H4>
<P><BR>
</P>
<P><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><I>#
spec/factories_spec.rb</I></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><BR><BR></FONT></FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif">FactoryGirl</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">.</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">factories</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">.</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">map</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">(&amp;:</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">name</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">).</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">each
</FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">do</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">
</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">|</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">factory_name</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">|</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><BR>
 describe </FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif">&quot;The
#{factory_name} factory&quot;</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">
</FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">do</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><BR>
    it </FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif">'is
valid'</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">
</FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">do</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><BR>
     build</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">(</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">factory_name</FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif">).</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif">should
be_valid<BR>     </FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">end</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><BR>
 </FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">end</FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><BR></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif">end</FONT></FONT></P>
<P><BR>
</P>
<P><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">#
lib/tasks/factory.rake</FONT></FONT></FONT></P>
<P><BR>
</P>
<P><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">if</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">defined</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">?(</FONT></FONT></FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">RSpec</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">)</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR>
 desc </FONT></FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">'Run
factory specs.'</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR>
 </FONT></FONT></FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">RSpec</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">::</FONT></FONT></FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">Core</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">::</FONT></FONT></FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">RakeTask</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">new</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">(:</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">factory_specs</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">)</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">do</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">|</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">t</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">|</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR>
   t</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">pattern
</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">=</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">'./spec/factories_spec.rb'</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR>
 </FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">end</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR></FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">end</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR><BR>task
spec</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">:</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">:</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">factory_specs</FONT></FONT></FONT></P>
<P><BR>
</P>
<H4 CLASS="western"><A NAME="h.9anmv439ebj2"></A>MiniTest Spec 
Example</H4>
<P><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">#
spec/factories_spec.rb</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">require</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">File</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">expand_path</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">(</FONT></FONT></FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">File</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">dirname</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">(</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">__FILE__</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">)</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">+</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">'/spec_helper'</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">)</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR><BR>describe
</FONT></FONT></FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">FactoryGirl</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">do</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR>
 EXCEPTIONS </FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">=</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">%</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">w</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">(</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
bad_</FONT></FONT></FONT><FONT FACE="Consolas, serif">user</FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">_address
shipping_method</FONT></FONT></FONT><FONT FACE="Consolas, serif">
your_errors etc</FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">)</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR>
 </FONT></FONT></FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">FactoryGirl</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">factories</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">each
</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">do</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">|</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">factory</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">|</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR>
   </FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">next</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">if</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
EXCEPTIONS</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">include</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">?(</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">factory</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">name</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">to_s</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">)</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR>
   describe </FONT></FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">&quot;The
#{factory.name} factory&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">do</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR>
     it </FONT></FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">'is
valid'</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">do</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR>
       instance </FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">=</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
build</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">(</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">factory</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">name</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">)</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR>
       instance</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">must_be
</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">:</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">valid</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">?</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR>
     </FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">end</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR>
   </FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">end</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR>
 </FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">end</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR></FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">end</FONT></FONT></FONT></P>
<P><BR>
</P>
<P><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">#
lib/tasks/factory.rake</FONT></FONT></FONT></P>
<P><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">#
assuming you are using spec style</FONT></FONT></FONT></P>
<P><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">desc
</FONT></FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">'Run
factory specs.'</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR></FONT></FONT></FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">Rake</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">::</FONT></FONT></FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">TestTask</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">new</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">(:</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">factory_specs</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">)</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">do</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">|</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">t</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">|</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR>
 t</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">pattern
</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">=</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">'./spec/factories_spec.rb'</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR></FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">end</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt"><BR><BR>task
test</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">:</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">:</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">factory_specs</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><BR>
</P>
<H4 CLASS="western" STYLE="line-height: 140%"><A NAME="h.4bdxk75dcrju"></A>
MiniTest without Spec example</H4>
<P STYLE="margin-bottom: 0in; line-height: 140%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">#
test/factories_test.rb</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">require</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">File</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">expand_path</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">(</FONT></FONT></FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">File</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">dirname</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">(</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">__FILE__</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">)</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">+</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">'/test_helper'</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">)
</FONT></FONT></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000000">
  </FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">class</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">FactoriesTest</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">&lt;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">ActiveSupport</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">::</FONT></FONT></FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">TestCase
</FONT></FONT></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000000">
     <FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">EXCEPTIONS
</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">=</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">%</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">w</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">(</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">user_address
user_email</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">)
</FONT></FONT></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000000">
     </FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">FactoryGirl</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">factories</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">map</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">(&amp;:</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">name</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">).</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">each
</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">do</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
 </FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">|</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">factory_name|</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000000">
        </FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">next</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">if</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
factory_name</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">to_s</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">in</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">?(</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">EXCEPTIONS</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">)
</FONT></FONT></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000000">
        <FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">context
</FONT></FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">&quot;The
#{factory_name} factory&quot;</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">do
</FONT></FONT></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000000">
           <FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">should
</FONT></FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">'be
valid'</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">do
</FONT></FONT></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000000">
              <FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">assert_equal
</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">true</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">,</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
build</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">(</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">factory_name</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">).</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">valid</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">?
</FONT></FONT></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000000">
           </FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">end
</FONT></FONT></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000000">
        </FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">end
</FONT></FONT></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000000">
     </FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">end
</FONT></FONT></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000000">
  </FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">end</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">#
lib/tasks/factory.rake</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">namespace</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">:</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">test
</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">do
</FONT></FONT></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000000">
  <FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">desc
</FONT></FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">'Test
factories'</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">Rake</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">::</FONT></FONT></FONT><FONT COLOR="#660066"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">TestTask</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">new</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">(:</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">factories</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">)</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">do</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">|</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">t</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">|
</FONT></FONT></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000000">
     <FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">t</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">.</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">pattern
</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">=</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">'./test/factories_test.rb'
</FONT></FONT></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000000">
  </FONT><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">end
</FONT></FONT></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000088"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">end
</FONT></FONT></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 140%"><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">task
minitest</FONT></FONT></FONT><FONT COLOR="#666600"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">:</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">
</FONT></FONT></FONT><FONT COLOR="#008800"><FONT FACE="Consolas, serif"><FONT SIZE=2 STYLE="font-size: 11pt">'test:factories'</FONT></FONT></FONT></P>
<P><BR>
</P>
<H3 CLASS="western" STYLE="line-height: 150%"><A NAME="h.900ihqo0eer6"></A>
Guard configuration for MiniTest</H3>
<P><BR>
</P>
<P>Guard is a command line tool to handle
events when changes occur in your file system, and can be configured
to run tests when changes occur. Here is a sample configuration that
will ignore tmp and other non-related files (including lib! ...may
not be what you want).</P>
<P><BR>
</P>
<UL>
	<LI><P><A HREF="https://github.com/guard/guard"><FONT COLOR="#880000"><U>Guard
	on Github</U></FONT></A></P>
	<LI><P><A HREF="https://github.com/guard/guard/wiki"><FONT COLOR="#880000"><U>Guard
	Wiki</U></FONT></A></P>
	<LI><P><A HREF="http://railscasts.com/episodes/264-guard"><FONT COLOR="#880000"><U>Railscasts
	Guard</U></FONT></A></P>
</UL>
<P><BR>
</P>
<P><FONT FACE="Consolas, serif"><I>#
.guard.rb in app root</I></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 145%"><FONT FACE="Consolas, serif"><I>#
Rails 4 ignores:</I></FONT><FONT FACE="Consolas, serif"><BR>ignore([%r{^bin/*},
%r{^config/*}, %r{^db/*}, %r{^lib/*}, %r{^log/*}, %r{^public/*},
%r{^tmp/*}])<BR><BR>guard :minitest, all_on_start: false, zeus: true,
bundler: false do<BR>  </FONT><FONT FACE="Consolas, serif"><I># Rails
4 watch:</I></FONT><FONT FACE="Consolas, serif"><BR> 
watch(%r{^app/(.+)\.rb})              { |m| &quot;test/#{m[1]}_test.rb&quot;
}<BR>  watch(%r{^test/.+_test\.rb})<BR> 
watch(%r{^test/test_helper\.rb})      { 'test' }<BR>end</FONT></P>
<P><BR>
</P>
<H1 CLASS="western"><A NAME="h.wmort4owqglv"></A>References</H1>
<P><BR>
</P>
<UL>
	<LI><P><A HREF="http://guides.rubyonrails.org/testing.html"><FONT COLOR="#aa0000"><U>Guide
	to Testing Rails Applications</U></FONT></A></P>
	<LI><P><A HREF="http://mikewilliamson.wordpress.com/2013/06/12/the-difference-between-feature-specs-and-request-specs/"><FONT COLOR="#aa0000"><U>Difference
	Between Feature Specs and Request Specs</U></FONT></A></P>
	<LI><P><A HREF="https://whatdoitest.com/getting-friendly-with-fixtures"><FONT COLOR="#aa0000"><U>Factories
	or Fixtures</U></FONT></A></P>
	<LI><P><A HREF="http://www.hiringthing.com/2012/08/02/rails-testing-demystifying-test-unit.html"><FONT COLOR="#aa0000"><U>Demystifying
	Test::Unit</U></FONT></A></P>
	<LI><P><A HREF="https://semaphoreapp.com/blog/2014/01/14/rails-testing-antipatterns-fixtures-and-factories.html"><FONT COLOR="#aa0000"><U>Rails
	Testing Antipatterns: Factories and Fixtures</U></FONT></A></P>
	<LI><P><A HREF="http://brandonhilkert.com/blog/7-reasons-why-im-sticking-with-minitest-and-fixtures-in-rails/"><FONT COLOR="#aa0000"><U>7
	Reasons Why I am Sticking with Minitest and Fixtures in Rails</U></FONT></A></P>
	<LI><P><A HREF="http://thoughts.wallproductions.com/2014/02/fixtures-vs-factories/"><FONT COLOR="#aa0000"><U>Factories
	vs Fixtures</U></FONT></A></P>
	<LI><P><A HREF="http://thoughts.wallproductions.com/2014/02/fixtures-vs-factories/"><FONT COLOR="#aa0000"><U>Mocking
	and Stubbing in Rails</U></FONT></A></P>
	<LI><P><A HREF="http://www.mattsears.com/articles/2011/12/10/minitest-quick-reference"><FONT COLOR="#aa0000"><U>MiniTest
	Quick Reference</U></FONT></A></P>
	<LI><P><A HREF="https://github.com/seattlerb/minitest"><FONT COLOR="#aa0000"><U>Seattlerb-MiniTest</U></FONT></A></P>
	<LI><P><A HREF="https://github.com/blowmage/minitest-rails-capybara"><FONT COLOR="#aa0000"><U>MiniTest-Rails-Capybara</U></FONT></A></P>
	<LI><P><A HREF="https://semaphoreapp.com/blog/2013/08/14/setting-up-bdd-stack-on-a-new-rails-4-application.html"><FONT COLOR="#aa0000"><U>Setting
	up the BDD stack on a new Rails 4 app</U></FONT></A></P>
	<LI><P><A HREF="https://github.com/rspec/rspec-rails"><FONT COLOR="#aa0000"><U>rspec-rails</U></FONT></A></P>
	<LI><P><A HREF="http://devblog.avdi.org/2012/08/31/configuring-database_cleaner-with-rails-rspec-capybara-and-selenium/"><FONT COLOR="#aa0000"><U>Configuring
	database_cleaner with Capybara, Rspec and Selenium</U></FONT></A></P>
	<LI><P><A HREF="http://everydayrails.com/2012/03/19/testing-series-rspec-models-factory-girl.html"><FONT COLOR="#aa0000"><U>Model
	Specs Testing</U></FONT></A></P>
	<LI><P><A HREF="http://guides.rubyonrails.org/testing.html#available-assertions"><FONT COLOR="#aa0000"><U>Rails
	Assertions</U></FONT></A></P>
	<LI><P><A HREF="http://martinfowler.com/articles/mocksArentStubs.html"><FONT COLOR="#aa0000"><U>Mocks
	aren’t Stubs</U></FONT></A></P>
	<LI><P><A HREF="http://blog.berylliumwork.com/2013/07/rails-4-devise-3-minitest-and-capybara.html"><FONT COLOR="#aa0000"><U>MiniTest,
	Capybara, and Factory Girl</U></FONT></A></P>
	<LI><P><A HREF="http://railscasts.com/episodes/327-minitest-with-rails"><FONT COLOR="#aa0000"><U>Railscasts
	MiniTest with Rails</U></FONT></A></P>
	<LI><P><A HREF="http://robots.thoughtbot.com/how-we-test-rails-applications"><FONT COLOR="#aa0000"><U>How
	We Test Rails ---ThoughtBot</U></FONT></A></P>
	<LI><P><A HREF="http://chriskottom.com/blog/2014/10/4-fantastic-ways-to-set-up-state-in-minitest/"><FONT COLOR="#aa0000"><U>MiniTest:
	Setting up before a Test</U></FONT></A></P>
	<LI><P><A HREF="http://chriskottom.com/blog/2014/10/exploring-minitest-concurrency/"><FONT COLOR="#aa0000"><U>Parallelize
	Me! MiniTest Concurrency</U></FONT></A></P>
	<LI><P><A HREF="http://chriskottom.com/blog/2014/08/customize-minitest-assertions-and-expectations/"><FONT COLOR="#aa0000"><U>Customize
	MiniTest Assertions and Expectations</U></FONT></A></P>
	<LI><P><A HREF="http://www.mattsears.com/articles/2013/12/17/a-guide-for-writing-maintainable-rails-tests"><FONT COLOR="#aa0000"><U>Guide
	for Writing Maintainable Rails Tests</U></FONT></A></P>
	<LI><P><A HREF="http://brandonhilkert.com/blog/managing-login-passwords-for-capybara-with-minitest-and-rails-fixtures/"><FONT COLOR="#aa0000"><U>Password
	Helper for Minitest and Capybara</U></FONT></A></P>
	<LI><P><A HREF="http://www.jackkinsella.ie/2014/06/06/debugging-rails-with-logs.html"><FONT COLOR="#aa0000"><U>Debugging
	Rails with Logs</U></FONT></A></P>
	<LI><P><A HREF="http://www.jackkinsella.ie/2014/06/06/debugging-rails-with-custom-instrumentation.html"><FONT COLOR="#aa0000"><U>Debugging
	with Custom Instrumentation</U></FONT></A></P>
	<LI><P><A HREF="https://developer.chrome.com/devtools/docs/javascript-debugging"><FONT COLOR="#aa0000"><U>Debugging
	Javascript</U></FONT></A></P>
	<LI><P><A HREF="http://www.jackkinsella.ie/2014/06/06/debugging-rails-with-operating-system-tools.html"><FONT COLOR="#aa0000"><U>Debugging
	with OS Tools</U></FONT></A></P>
</UL>
<P><BR>
</P>
<P><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 150%; page-break-inside: avoid; widows: 2; orphans: 2; page-break-after: avoid">
<BR>
</P>
